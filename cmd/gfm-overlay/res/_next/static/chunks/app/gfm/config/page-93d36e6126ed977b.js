(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{8941:function(e,t,r){Promise.resolve().then(r.bind(r,6381))},300:function(e,t,r){"use strict";r.d(t,{r:function(){return n}});let n={title:"string",width:"number",height:"number","run-token":"string","config-refresh":"number","timer-refresh":"number","hide-timer":"boolean"}},6381:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(9268);r(9717);var l=r(6008),s=r(6006),i=r(1202);function u(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase()))}let a=(0,s.forwardRef)((e,t)=>{var r;let[u,a]=(0,s.useState)([]),o=(0,l.useSearchParams)(),c=null!==(r=o.get("splits_url"))&&void 0!==r?r:"/splits",{forceUpdate:d}=e;return(0,s.useEffect)(()=>{let e=!1;return(0,i.Z)("".concat(c,"/list"),void 0,t=>{if(e){console.log("aborting...");return}a(t.Splits)}),()=>{e=!0}},[c,a,d]),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"categories",children:" Select a Category: "}),(0,n.jsxs)("select",{ref:t,name:"categories",id:"categories",disabled:0==u.length,children:[0==u.length?(0,n.jsx)("option",{value:"",children:" -- Empty -- "}):null,u.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})});function o(){var e;let[t,r]=(0,s.useState)(0),[o,c]=(0,s.useState)(""),[d,h]=(0,s.useState)([]),[f,m]=(0,s.useState)({}),p=(0,s.useRef)(0),x=(0,s.useRef)(2147483647),g=(0,s.useRef)(null),j=(0,s.useRef)(null),v=(0,l.useSearchParams)(),b=null!==(e=v.get("splits_url"))&&void 0!==e?e:"/splits",y=(0,s.useCallback)(()=>{p.current=0,x.current=2147483647},[]),k=(0,s.useCallback)(()=>{if(g.current){if(1!=g.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=g.current.selectedOptions[0].value,t=u(e);(0,i.Z)("".concat(b,"/load/").concat(t),void 0,e=>{c(e.Name),y();let t=[],r={};for(let n of e.Entries){let e="".concat(p.current);p.current++,t.push(e),r[e]=n}h(t),m(r)})},[b,c,y]),C=(0,s.useCallback)(()=>{if(g.current){if(1!=g.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=g.current.selectedOptions[0].value,t=u(e);(0,i.Z)("".concat(b,"/").concat(t),{method:"DELETE"},()=>{r(e=>e+1)})},[b]),S=(0,s.useCallback)(()=>{h(e=>e.concat(["".concat(p.current)])),p.current+=1},[h]),_=(0,s.useCallback)(e=>{h(t=>{let r=[];for(let n of t)r.push(n),n==e&&r.push("".concat(n,".").concat(x.current));return r}),x.current-=1},[h]),O=(0,s.useCallback)(e=>{h(t=>t.filter(t=>e!=t))},[h]),N=(0,s.useCallback)(()=>{h([]),m({}),y()},[m,h,y]),E=(0,s.useCallback)(()=>{if(null==j.current){console.error("no form available");return}if(!j.current.checkValidity()){j.current.reportValidity();return}let e="",t={},n=j.current.getElementsByTagName("input");for(let r=0;r<n.length;r++){let l=n[r];"title"==l.name?e=l.value:l.name&&l.name.startsWith("segment-")&&(t[l.name]=l.value)}let l=Object.entries(t).sort((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0).map(e=>{let[t,r]=e;return r});if(0==l.length){console.error("at least one segment must be speficied!");return}let s=JSON.stringify({Name:e,Entries:l}),u="POST";if(g.current)for(let t=0;t<g.current.options.length;t++){let r=g.current.options[t];if(r.value==e){u="PUT";break}}(0,i.Z)("".concat(b),{method:u,body:s},()=>{y(),N(),c(""),"POST"==u&&r(e=>e+1)})},[y,b,N,c]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:" Category Manager "}),(0,n.jsx)("h2",{children:" Categories "}),(0,n.jsx)(a,{forceUpdate:t,ref:g}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"Load",onClick:k}),(0,n.jsx)("input",{type:"button",value:"Delete",onClick:C})]}),(0,n.jsx)("h2",{children:" Edit Category "}),(0,n.jsx)("iframe",{name:"prevent-submission",style:{display:"none"}}),(0,n.jsxs)("form",{ref:j,target:"prevent-submission",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",children:" Title: "}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:o,required:!0},"title")]}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"(+) Add segment (+)",onClick:S}),(0,n.jsx)("input",{type:"button",value:"Reset Segments",onClick:N})]}),d.map(e=>(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{className:"segment",type:"button",value:"-",onClick:t=>O(e)}),(0,n.jsx)("input",{className:"segment",type:"text",id:"segment-"+e,name:"segment-"+e,required:!0,defaultValue:f[e]},"segment-"+e),(0,n.jsx)("input",{className:"segment",type:"button",value:"+",onClick:t=>_(e)})]},"div-"+e)),(0,n.jsx)("div",{children:(0,n.jsx)("input",{className:"submit",type:"button",value:"Save",onClick:E})})]})]})}a.displayName="CategoryList";var c=r(7990),d=r(300);function h(){var e,t;let[r,h]=(0,s.useState)(""),[f,m]=(0,s.useState)(0),[p,x]=(0,s.useState)(0),[g,j]=(0,s.useState)(2500),[v,b]=(0,s.useState)(117),[y,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(""),[_,O]=(0,s.useState)(0),N=(0,s.useRef)(null),E=(0,s.useRef)(null),R=(0,l.useSearchParams)(),T=null!==(e=R.get("post_url"))&&void 0!==e?e:"/ram_store/config",w=null!==(t=R.get("run_url"))&&void 0!==t?t:"/run",F=(0,s.useCallback)(()=>{S(""),h(""),E.current&&(E.current.value="")},[S]),P=(0,s.useCallback)(()=>{O(e=>e+1)},[O]);return(0,s.useEffect)(()=>{let e=!1;return(0,c.Z)(T,d.r,void 0,t=>{e||(h(t.title),m(t.width),x(t.height),t["run-token"]&&S(t["run-token"]),t["config-refresh"]&&j(t["config-refresh"]),t["timer-refresh"]&&b(t["timer-refresh"]),k(!!t["hide-timer"]))}),()=>{e=!0}},[T,h,m,x]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:" Config "}),(0,n.jsx)("h2",{children:" Configure Run "}),(0,n.jsx)("iframe",{name:"prevent-submission",style:{display:"none"}}),(0,n.jsxs)("form",{target:"prevent-submission",children:[(0,n.jsx)("div",{className:"fill-line",children:(0,n.jsx)("input",{type:"button",value:"Reload list",onClick:P})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"run-enabled",children:" Run enabled? "}),(0,n.jsx)("input",{type:"checkbox",name:"run-enabled",checked:!!C,disabled:!0})]}),(0,n.jsx)(a,{ref:N,forceUpdate:_}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"Setup Run",onClick:function(){if(N.current){if(1!=N.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=N.current.selectedOptions[0].value,t=u(e);(0,i.Z)("".concat(w,"/new/").concat(t),void 0,t=>{S(t.Token),h(""),E.current&&(E.current.value=e)})}}),(0,n.jsx)("input",{type:"button",value:"Remove Run",onClick:F})]})]}),(0,n.jsx)("h2",{children:" Configure Stream "}),(0,n.jsxs)("form",{action:T,encType:"multipart/form-data",method:"POST",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",children:" Title: "}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:r,required:!0,ref:E,readOnly:!!C},"title")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"width",children:" Width: "}),(0,n.jsx)("input",{type:"number",id:"width",name:"width",defaultValue:f,required:!0},"width")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"height",children:" Height: "}),(0,n.jsx)("input",{type:"number",id:"height",name:"height",defaultValue:p,required:!0},"height")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"config-refresh",children:" Config Update (ms): "}),(0,n.jsx)("input",{type:"number",id:"config-refresh",name:"config-refresh",defaultValue:g},"config-refresh")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"timer-refresh",children:" Timer Update (ms): "}),(0,n.jsx)("input",{type:"number",id:"timer-refresh",name:"timer-refresh",defaultValue:v},"timer-refresh")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"hide-timer",children:" Hide timer: "}),(0,n.jsx)("input",{type:"checkbox",id:"hide-timer",name:"hide-timer",defaultChecked:y},"hide-timer")]}),(0,n.jsx)("input",{className:"hidden",type:"text",id:"run-token",name:"run-token",defaultValue:C},"run-token"),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"submit",value:"Update"})})]}),(0,n.jsx)(o,{})]})}},1202:function(e,t,r){"use strict";function n(e,t,r,n){let l={...t,cache:"no-store",headers:{"content-type":"application/json"}};fetch(e,l).then(e=>{if(!e.ok){console.error(e.statusText),null==n||n(e.status);return}200==e.status&&r?e.json().then(e=>{r(e)}):204==e.status&&r&&r()})}r.d(t,{Z:function(){return n}})},7990:function(e,t,r){"use strict";function n(e,t,r,n,l){let s={...r,cache:"no-store",headers:{"content-type":"multipart/form-data"}};fetch(e,s).then(e=>{if(!e.ok){console.error(e.statusText),null==l||l(e.status);return}200==e.status&&n?e.formData().then(e=>{let r=Object.fromEntries(Object.entries(t).map(t=>{let[r,n]=t,l=e.get(r);if(void 0===l)return[r,void 0];switch(n){case"string":return[r,l+""];case"number":return[r,parseInt(l+"")];case"boolean":return[r,!!l]}}).filter(e=>!!e));n(r)}):204==e.status&&n&&n()})}r.d(t,{Z:function(){return n}})},9717:function(){},3177:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(6006),l=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var n,s={},o=null,c=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,n)&&!a.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:l,type:e,key:o,ref:c,props:s,_owner:u.current}}t.Fragment=s,t.jsx=o,t.jsxs=o},9268:function(e,t,r){"use strict";e.exports=r(3177)},6008:function(e,t,r){e.exports=r(3027)}},function(e){e.O(0,[667,488,744],function(){return e(e.s=8941)}),_N_E=e.O()}]);