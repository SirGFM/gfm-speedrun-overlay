(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{8941:function(e,t,r){Promise.resolve().then(r.bind(r,7304))},300:function(e,t,r){"use strict";r.d(t,{r:function(){return n}});let n={title:"string",width:"number",height:"number","run-token":"string","config-refresh":"number","timer-refresh":"number","hide-timer":"boolean"}},7304:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(9268);r(9717);var l=r(6008),s=r(6006),i=r(1202);let u=(0,s.forwardRef)((e,t)=>{var r;let[u,a]=(0,s.useState)([]),o=(0,l.useSearchParams)(),c=null!==(r=o.get("splits_url"))&&void 0!==r?r:"/splits",{forceUpdate:d}=e;return(0,s.useEffect)(()=>{let e=!1;return(0,i.Z)("".concat(c,"/list"),void 0,t=>{if(e){console.log("aborting...");return}a(t.Splits)}),()=>{e=!0}},[c,a,d]),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"categories",children:" Select a Category: "}),(0,n.jsxs)("select",{ref:t,name:"categories",id:"categories",disabled:0==u.length,children:[0==u.length?(0,n.jsx)("option",{value:"",children:" -- Empty -- "}):null,u.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})});function a(){var e;let[t,r]=(0,s.useState)(0),[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)([]),[h,f]=(0,s.useState)({}),m=(0,s.useRef)(0),p=(0,s.useRef)(2147483647),x=(0,s.useRef)(null),g=(0,s.useRef)(null),j=(0,l.useSearchParams)(),v=null!==(e=j.get("splits_url"))&&void 0!==e?e:"/splits",b=(0,s.useCallback)(()=>{m.current=0,p.current=2147483647},[]),y=(0,s.useCallback)(()=>{if(x.current){if(1!=x.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=x.current.selectedOptions[0].value;(0,i.Z)("".concat(v,"/load/").concat(e),void 0,e=>{o(e.Name),b();let t=[],r={};for(let n of e.Entries){let e="".concat(m.current);m.current++,t.push(e),r[e]=n}d(t),f(r)})},[v,o,b]),k=(0,s.useCallback)(()=>{if(x.current){if(1!=x.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=x.current.selectedOptions[0].value;(0,i.Z)("".concat(v,"/").concat(e),{method:"DELETE"},()=>{r(e=>e+1)})},[v]),C=(0,s.useCallback)(()=>{d(e=>e.concat(["".concat(m.current)])),m.current+=1},[d]),S=(0,s.useCallback)(e=>{d(t=>{let r=[];for(let n of t)r.push(n),n==e&&r.push("".concat(n,".").concat(p.current));return r}),p.current-=1},[d]),_=(0,s.useCallback)(e=>{d(t=>t.filter(t=>e!=t))},[d]),O=(0,s.useCallback)(()=>{d([]),f({}),b()},[f,d,b]),N=(0,s.useCallback)(()=>{if(null==g.current){console.error("no form available");return}if(!g.current.checkValidity()){g.current.reportValidity();return}let e="",t={},n=g.current.getElementsByTagName("input");for(let r=0;r<n.length;r++){let l=n[r];"title"==l.name?e=l.value:l.name&&l.name.startsWith("segment-")&&(t[l.name]=l.value)}let l=Object.entries(t).sort((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0).map(e=>{let[t,r]=e;return r});if(0==l.length){console.error("at least one segment must be speficied!");return}let s=JSON.stringify({Name:e,Entries:l}),u="POST";if(x.current)for(let t=0;t<x.current.options.length;t++){let r=x.current.options[t];if(r.value==e){u="PUT";break}}(0,i.Z)("".concat(v),{method:u,body:s},()=>{b(),O(),o(""),"POST"==u&&r(e=>e+1)})},[b,v,O,o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:" Category Manager "}),(0,n.jsx)("h2",{children:" Categories "}),(0,n.jsx)(u,{forceUpdate:t,ref:x}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"Load",onClick:y}),(0,n.jsx)("input",{type:"button",value:"Delete",onClick:k})]}),(0,n.jsx)("h2",{children:" Edit Category "}),(0,n.jsx)("iframe",{name:"prevent-submission",style:{display:"none"}}),(0,n.jsxs)("form",{ref:g,target:"prevent-submission",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",children:" Title: "}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:a,required:!0},"title")]}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"(+) Add segment (+)",onClick:C}),(0,n.jsx)("input",{type:"button",value:"Reset Segments",onClick:O})]}),c.map(e=>(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{className:"segment",type:"button",value:"-",onClick:t=>_(e)}),(0,n.jsx)("input",{className:"segment",type:"text",id:"segment-"+e,name:"segment-"+e,required:!0,defaultValue:h[e]},"segment-"+e),(0,n.jsx)("input",{className:"segment",type:"button",value:"+",onClick:t=>S(e)})]},"div-"+e)),(0,n.jsx)("div",{children:(0,n.jsx)("input",{className:"submit",type:"button",value:"Save",onClick:N})})]})]})}u.displayName="CategoryList";var o=r(7990),c=r(300);function d(){var e,t;let[r,d]=(0,s.useState)(""),[h,f]=(0,s.useState)(0),[m,p]=(0,s.useState)(0),[x,g]=(0,s.useState)(2500),[j,v]=(0,s.useState)(117),[b,y]=(0,s.useState)(!1),[k,C]=(0,s.useState)(""),[S,_]=(0,s.useState)(0),O=(0,s.useRef)(null),N=(0,s.useRef)(null),E=(0,l.useSearchParams)(),R=null!==(e=E.get("post_url"))&&void 0!==e?e:"/ram_store/config",T=null!==(t=E.get("run_url"))&&void 0!==t?t:"/run",w=(0,s.useCallback)(()=>{C(""),d(""),N.current&&(N.current.value="")},[C]),F=(0,s.useCallback)(()=>{_(e=>e+1)},[_]);return(0,s.useEffect)(()=>{let e=!1;return(0,o.Z)(R,c.r,void 0,t=>{e||(d(t.title),f(t.width),p(t.height),t["run-token"]&&C(t["run-token"]),t["config-refresh"]&&g(t["config-refresh"]),t["timer-refresh"]&&v(t["timer-refresh"]),y(!!t["hide-timer"]))}),()=>{e=!0}},[R,d,f,p]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:" Config "}),(0,n.jsx)("h2",{children:" Configure Run "}),(0,n.jsx)("iframe",{name:"prevent-submission",style:{display:"none"}}),(0,n.jsxs)("form",{target:"prevent-submission",children:[(0,n.jsx)("div",{className:"fill-line",children:(0,n.jsx)("input",{type:"button",value:"Reload list",onClick:F})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"run-enabled",children:" Run enabled? "}),(0,n.jsx)("input",{type:"checkbox",name:"run-enabled",checked:!!k,disabled:!0})]}),(0,n.jsx)(u,{ref:O,forceUpdate:S}),(0,n.jsxs)("div",{className:"fill-line",children:[(0,n.jsx)("input",{type:"button",value:"Setup Run",onClick:function(){if(O.current){if(1!=O.current.selectedOptions.length){console.error("got multiple categories");return}}else{console.error("no category selection available");return}let e=O.current.selectedOptions[0].value;(0,i.Z)("".concat(T,"/new/").concat(e),void 0,t=>{C(t.Token),d(""),N.current&&(N.current.value=e)})}}),(0,n.jsx)("input",{type:"button",value:"Remove Run",onClick:w})]})]}),(0,n.jsx)("h2",{children:" Configure Stream "}),(0,n.jsxs)("form",{action:R,encType:"multipart/form-data",method:"POST",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",children:" Title: "}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:r,required:!0,ref:N,readOnly:!!k},"title")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"width",children:" Width: "}),(0,n.jsx)("input",{type:"number",id:"width",name:"width",defaultValue:h,required:!0},"width")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"height",children:" Height: "}),(0,n.jsx)("input",{type:"number",id:"height",name:"height",defaultValue:m,required:!0},"height")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"config-refresh",children:" Config Update (ms): "}),(0,n.jsx)("input",{type:"number",id:"config-refresh",name:"config-refresh",defaultValue:x},"config-refresh")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"timer-refresh",children:" Timer Update (ms): "}),(0,n.jsx)("input",{type:"number",id:"timer-refresh",name:"timer-refresh",defaultValue:j},"timer-refresh")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"hide-timer",children:" Hide timer: "}),(0,n.jsx)("input",{type:"checkbox",id:"hide-timer",name:"hide-timer",defaultChecked:b},"hide-timer")]}),(0,n.jsx)("input",{className:"hidden",type:"text",id:"run-token",name:"run-token",defaultValue:k},"run-token"),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"submit",value:"Update"})})]}),(0,n.jsx)(a,{})]})}},1202:function(e,t,r){"use strict";function n(e,t,r,n){let l={...t,cache:"no-store",headers:{"content-type":"application/json"}};fetch(e,l).then(e=>{if(!e.ok){console.error(e.statusText),null==n||n(e.status);return}200==e.status&&r?e.json().then(e=>{r(e)}):204==e.status&&r&&r()})}r.d(t,{Z:function(){return n}})},7990:function(e,t,r){"use strict";function n(e,t,r,n,l){let s={...r,cache:"no-store",headers:{"content-type":"multipart/form-data"}};fetch(e,s).then(e=>{if(!e.ok){console.error(e.statusText),null==l||l(e.status);return}200==e.status&&n?e.formData().then(e=>{let r=Object.fromEntries(Object.entries(t).map(t=>{let[r,n]=t,l=e.get(r);if(void 0===l)return[r,void 0];switch(n){case"string":return[r,l+""];case"number":return[r,parseInt(l+"")];case"boolean":return[r,!!l]}}).filter(e=>!!e));n(r)}):204==e.status&&n&&n()})}r.d(t,{Z:function(){return n}})},9717:function(){},3177:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(6006),l=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var n,s={},o=null,c=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,n)&&!a.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:l,type:e,key:o,ref:c,props:s,_owner:u.current}}t.Fragment=s,t.jsx=o,t.jsxs=o},9268:function(e,t,r){"use strict";e.exports=r(3177)},6008:function(e,t,r){e.exports=r(3027)}},function(e){e.O(0,[667,488,744],function(){return e(e.s=8941)}),_N_E=e.O()}]);